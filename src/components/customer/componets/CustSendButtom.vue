<template>
  <div class="emoji-top">
    <svg style="cursor: pointer" v-if="!store.toggleEmojiIcon" @click="showEmojiChange" width="26" height="26"
      viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M12.9105 1.69727C9.8976 1.70028 7.00897 2.89848 4.87853 5.02892C2.74809 7.15936 1.54989 10.048 1.54688 13.0609C1.54989 16.0738 2.74809 18.9624 4.87853 21.0929C7.00897 23.2233 9.8976 24.4215 12.9105 24.4245C15.9234 24.4215 18.812 23.2233 20.9425 21.0929C23.0729 18.9624 24.2711 16.0738 24.2741 13.0609C24.2711 10.048 23.0729 7.15936 20.9425 5.02892C18.812 2.89848 15.9234 1.70028 12.9105 1.69727ZM12.9105 22.7995C10.3286 22.7965 7.85327 21.7695 6.02758 19.9438C4.20188 18.1181 3.17489 15.6428 3.17188 13.0609C3.17489 10.479 4.20188 8.00366 6.02758 6.17797C7.85327 4.35227 10.3286 3.32528 12.9105 3.32227C15.4924 3.32528 17.9677 4.35227 19.7934 6.17797C21.6191 8.00366 22.6461 10.479 22.6491 13.0609C22.6461 15.6428 21.6191 18.1181 19.7934 19.9438C17.9677 21.7695 15.4924 22.7965 12.9105 22.7995Z"
        fill="#929292" />
      <path
        d="M8.10938 10.2695C8.10937 10.4296 8.1409 10.5881 8.20215 10.7359C8.26339 10.8838 8.35317 11.0181 8.46634 11.1313C8.57951 11.2445 8.71386 11.3343 8.86173 11.3955C9.0096 11.4568 9.16808 11.4883 9.32812 11.4883C9.48817 11.4883 9.64665 11.4568 9.79452 11.3955C9.94239 11.3343 10.0767 11.2445 10.1899 11.1313C10.3031 11.0181 10.3929 10.8838 10.4541 10.7359C10.5154 10.5881 10.5469 10.4296 10.5469 10.2695C10.5469 10.1095 10.5154 9.951 10.4541 9.80314C10.3929 9.65527 10.3031 9.52092 10.1899 9.40774C10.0767 9.29457 9.94239 9.2048 9.79452 9.14355C9.64665 9.08231 9.48817 9.05078 9.32812 9.05078C9.16808 9.05078 9.0096 9.08231 8.86173 9.14355C8.71386 9.2048 8.57951 9.29457 8.46634 9.40774C8.35317 9.52092 8.26339 9.65527 8.20215 9.80314C8.1409 9.951 8.10937 10.1095 8.10938 10.2695Z"
        fill="#929292" />
      <path
        d="M14.9141 10.2695C14.9141 10.5928 15.0425 10.9028 15.271 11.1313C15.4996 11.3599 15.8096 11.4883 16.1328 11.4883C16.456 11.4883 16.766 11.3599 16.9946 11.1313C17.2232 10.9028 17.3516 10.5928 17.3516 10.2695C17.3516 9.9463 17.2232 9.6363 16.9946 9.40774C16.766 9.17918 16.456 9.05078 16.1328 9.05078C15.8096 9.05078 15.4996 9.17918 15.271 9.40774C15.0425 9.6363 14.9141 9.9463 14.9141 10.2695Z"
        fill="#929292" />
      <path
        d="M16.9888 15.565C16.8991 15.5074 16.7989 15.468 16.694 15.4492C16.5891 15.4303 16.4815 15.4323 16.3773 15.4551C16.2732 15.4779 16.1745 15.521 16.0871 15.582C15.9996 15.6429 15.925 15.7205 15.8676 15.8103C15.3394 16.6342 14.1418 17.1672 12.8191 17.1672C11.4963 17.1672 10.3003 16.6358 9.77219 15.812C9.71591 15.7195 9.64172 15.6392 9.55398 15.5758C9.46624 15.5124 9.36671 15.4672 9.26125 15.4428C9.15578 15.4184 9.0465 15.4153 8.93983 15.4337C8.83316 15.4522 8.73125 15.4917 8.64007 15.5501C8.5489 15.6084 8.47031 15.6844 8.40892 15.7736C8.34753 15.8627 8.30458 15.9633 8.28258 16.0693C8.26058 16.1753 8.25998 16.2846 8.28083 16.3908C8.30167 16.497 8.34352 16.598 8.40394 16.6878C9.23594 17.9862 10.9276 18.7922 12.8191 18.7922C14.7122 18.7922 16.4038 17.9862 17.2358 16.6862C17.3516 16.5047 17.3906 16.2847 17.3443 16.0745C17.298 15.8643 17.1701 15.681 16.9888 15.565Z"
        fill="#929292" />
    </svg>
    <!-- 表情 -->

    <svg v-else @click="showEmojiChange" width="26" height="26" viewBox="0 0 26 26" fill="none"
      xmlns="http://www.w3.org/2000/svg">
      <path d="M4 10L13 19" stroke="#929292" stroke-width="1.7" stroke-linecap="round" />
      <path d="M22 10L13 19" stroke="#929292" stroke-width="1.7" stroke-linecap="round" />
    </svg>

  </div>


  <input class="bottom-inp" @keydown.enter="sendMessage" v-model="store.inputNewMessage" placeholder="something..."
    type="text" />
  <WebbitButtom @click="sendMessage">
    <template #icon>
      <svg width="26" height="22" viewBox="0 0 26 22" fill="none" xmlns="http://www.w3.org/2000/svg"
        style="margin-left: 0.5em">
        <path opacity="0.7"
          d="M1.397 0.0564583C0.640366 -0.198942 -0.113613 0.449753 0.0142612 1.246L3.19785 21.0985C3.22519 21.2692 3.2929 21.4306 3.39522 21.5691C3.49753 21.7076 3.63141 21.8191 3.78548 21.894C3.93955 21.9689 4.10923 22.0051 4.28009 21.9994C4.45096 21.9938 4.61794 21.9465 4.76683 21.8615L13.2416 17.0272L17.0926 18.6942C17.2482 18.7616 17.4173 18.7903 17.5861 18.7781C17.7548 18.7659 17.9182 18.713 18.0627 18.624C18.2071 18.5349 18.3284 18.4123 18.4164 18.2662C18.5045 18.1201 18.5567 17.9549 18.5688 17.7842L18.5714 17.7059L18.5651 13.9903L25.4602 10.0573C26.2354 9.61465 26.1537 8.47554 25.3562 8.1359L25.2739 8.10478L1.397 0.0564583ZM2.39028 2.65285L22.335 9.37588L16.9812 12.4294C16.8302 12.5157 16.7023 12.6381 16.6089 12.7858C16.5155 12.9336 16.4593 13.1023 16.4453 13.2772L16.4416 13.3662L16.4464 16.0796L13.5944 14.8455C13.4597 14.7872 13.3146 14.7577 13.1681 14.7589C13.0217 14.7601 12.877 14.792 12.7433 14.8525L12.6552 14.8976L5.04964 19.2361L2.39028 2.65285ZM5.55265 5.75306C5.38219 5.95995 5.29488 6.22409 5.30805 6.49305C5.32122 6.76201 5.43391 7.01613 5.62375 7.20498L5.68848 7.264L12.0557 12.6295C12.2662 12.8053 12.5357 12.8923 12.808 12.8723C13.0804 12.8523 13.3346 12.7269 13.5179 12.5223C13.7012 12.3176 13.7994 12.0493 13.7921 11.7733C13.7848 11.4973 13.6726 11.2348 13.4787 11.0403L13.414 10.9813L7.04682 5.6157C6.83063 5.43363 6.5518 5.34583 6.27161 5.37158C5.99143 5.39734 5.73282 5.53456 5.55265 5.75306Z"
          fill="white" />
      </svg>
    </template>
  </WebbitButtom>
</template>

<script setup>
import { socket } from '@/socket/socketIo'
import WebbitButtom from '../WebbitButtom.vue'
import { useMessageStore } from '@/store/useMessageStore'
const store = useMessageStore()
//切换表情框显示
const showEmojiChange = () => {
  store.toggleEmojiIcon = !store.toggleEmojiIcon
}
const emit = defineEmits(['send-message'])
//发送信息
const sendMessage = () => {
  if (store.inputNewMessage) {
    store.userMessage.push({
      id: store.userMessage.length + 1,
      content: store.inputNewMessage,
      receiver: false
    })
    socket.emit('private message', store.inputNewMessage)
    emit('send-message')
    store.inputNewMessage = ''
  }
}
</script>

<style lang="scss" scoped>
.bottom-inp {
  border-radius: 50px;
  flex: 1;
  height: 2.8em;
  margin: 0 1em;
  border: none;
  background-color: #dcf2f8;
  padding-left: 1.5em;
  font-size: small !important;
}


input::placeholder {
  color: rgba(146, 146, 146, 0.46);
}

input:focus {
  border-color: #f1fbff;
  border-top-color: #b2dff1;
  /* 设置边框颜色为蓝色 */
  border-width: 0.0625em;
  /* 设置边框宽度 */
  /* border-style: solid; */
  /* 设置边框样式为实线 */
  outline: none;
  /* 去除默认的外部轮廓样式 */
  border-radius: none;
}

.emoji-top {
  width: 26px;
  height: 26px;
}
</style>
