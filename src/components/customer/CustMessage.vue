<template>
  <CustomerLayout>
    <template #headerLeft>
      <svg
        @click="goBack"
        style="cursor: pointer"
        width="9"
        height="14"
        viewBox="0 0 9 14"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M2.32777 7.00038L8.71754 1.43417C9.09415 1.10553 9.09415 0.573666 8.71754 0.246082C8.34095 -0.0820272 7.72994 -0.0820272 7.35335 0.246082L0.282023 6.40647C-0.0940075 6.73458 -0.0940075 7.26671 0.282023 7.59379L7.35335 13.7539C7.54222 13.918 7.7891 14 8.03601 14C8.28293 14 8.52981 13.918 8.71754 13.7534C9.09415 13.4253 9.09415 12.8942 8.71754 12.5661L2.32777 7.00038Z"
          fill="#929292"
        />
      </svg>
    </template>
    <template #content>
      <div class="chat-container" ref="chatContainerRef" @change="showEmojiChange">
        <div
          v-for="(message, index) in chatLog"
          :key="index"
          class="message"
          :class="{ 'receiver-message': message.receiver, 'sender-message': !message.receiver }"
        >
          <img
            v-if="message.receiver"
            class="avatar"
            :src="store.localImagePaths[0]"
            :alt="message.altText"
          />

          <div class="message-content">
            <div
              :class="{
                'message-text': true,
                'message-text-left': message.receiver,
                'message-text-right': !message.receiver
              }"
            >
              {{ message.content }}
            </div>
          </div>
        </div>
      </div>
      <div class="emijon-box" v-show="isShowEmojio">
        <Picker :showPreview="false" :data="emojiIndex" set="twitter" @select="showEmoji" />
      </div>
      <div class="chat-function functon-phone" :class="{ 'function-color': isShowEmojio }">
        <div class="chat-function-left">
          <svg
            width="198"
            height="12"
            viewBox="0 0 198 12"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M5.278 11.196C2.716 11.196 0.812 9.208 0.812 5.876C0.812 2.572 2.758 0.555999 5.362 0.555999C6.608 0.555999 7.574 1.158 8.176 1.816L7.462 2.656C6.93 2.082 6.244 1.69 5.376 1.69C3.43 1.69 2.142 3.286 2.142 5.848C2.142 8.438 3.374 10.048 5.334 10.048C6.3 10.048 7.056 9.628 7.714 8.9L8.414 9.712C7.602 10.664 6.608 11.196 5.278 11.196ZM13.7297 11.196C11.8537 11.196 10.2017 9.726 10.2017 7.22C10.2017 4.672 11.8537 3.216 13.7297 3.216C15.5917 3.216 17.2437 4.672 17.2437 7.22C17.2437 9.726 15.5917 11.196 13.7297 11.196ZM13.7297 10.132C15.0457 10.132 15.9277 8.956 15.9277 7.22C15.9277 5.456 15.0457 4.28 13.7297 4.28C12.3997 4.28 11.5177 5.456 11.5177 7.22C11.5177 8.956 12.3997 10.132 13.7297 10.132ZM19.826 11V3.398H20.862L20.988 4.504H21.03C21.744 3.79 22.528 3.216 23.578 3.216C25.174 3.216 25.902 4.252 25.902 6.184V11H24.614V6.352C24.614 4.924 24.18 4.322 23.172 4.322C22.402 4.322 21.856 4.728 21.1 5.484V11H19.826ZM31.3109 11.196C29.6869 11.196 29.1549 10.174 29.1549 8.662V4.434H28.0209V3.482L29.2109 3.398L29.3509 1.256H30.4289V3.398H32.4869V4.434H30.4289V8.69C30.4289 9.614 30.7229 10.16 31.6049 10.16C31.8709 10.16 32.2209 10.048 32.4589 9.95L32.7109 10.902C32.2909 11.056 31.7869 11.196 31.3109 11.196ZM36.1354 11.196C34.8614 11.196 33.9094 10.398 33.9094 9.026C33.9094 7.374 35.3374 6.548 38.5714 6.184C38.5714 5.204 38.2634 4.266 37.0174 4.266C36.1214 4.266 35.3234 4.686 34.7354 5.092L34.2314 4.196C34.9314 3.748 35.9954 3.216 37.2134 3.216C39.0754 3.216 39.8594 4.448 39.8594 6.338V11H38.8094L38.6974 10.104H38.6414C37.9274 10.706 37.0734 11.196 36.1354 11.196ZM36.4854 10.16C37.2274 10.16 37.8434 9.81 38.5714 9.152V7.038C36.0094 7.332 35.1554 7.962 35.1554 8.942C35.1554 9.81 35.7434 10.16 36.4854 10.16ZM45.8161 11.196C43.8001 11.196 42.2601 9.726 42.2601 7.22C42.2601 4.672 43.9681 3.216 45.9141 3.216C46.9081 3.216 47.6081 3.622 48.1401 4.112L47.4961 4.952C47.0481 4.546 46.5721 4.28 45.9841 4.28C44.5841 4.28 43.5761 5.456 43.5761 7.22C43.5761 8.956 44.5421 10.132 45.9421 10.132C46.6281 10.132 47.2581 9.796 47.7341 9.376L48.2801 10.23C47.6081 10.832 46.7261 11.196 45.8161 11.196ZM52.7194 11.196C51.0954 11.196 50.5634 10.174 50.5634 8.662V4.434H49.4294V3.482L50.6194 3.398L50.7594 1.256H51.8374V3.398H53.8954V4.434H51.8374V8.69C51.8374 9.614 52.1314 10.16 53.0134 10.16C53.2794 10.16 53.6294 10.048 53.8674 9.95L54.1194 10.902C53.6994 11.056 53.1954 11.196 52.7194 11.196ZM62.0796 11.196C60.4836 11.196 59.7556 10.16 59.7556 8.214V3.398H61.0296V8.06C61.0296 9.474 61.4636 10.076 62.4716 10.076C63.2416 10.076 63.8016 9.698 64.5156 8.802V3.398H65.7896V11H64.7396L64.6276 9.81H64.5996C63.8856 10.636 63.1296 11.196 62.0796 11.196ZM70.9195 11.196C69.8415 11.196 68.7915 10.734 68.0775 10.146L68.7075 9.292C69.3655 9.824 70.0375 10.202 70.9475 10.202C71.9555 10.202 72.4595 9.67 72.4595 8.998C72.4595 8.228 71.5495 7.878 70.7095 7.57C69.6595 7.164 68.4975 6.66 68.4975 5.358C68.4975 4.154 69.4635 3.216 71.1155 3.216C72.0535 3.216 72.8935 3.594 73.4815 4.07L72.8655 4.882C72.3475 4.504 71.8015 4.21 71.1295 4.21C70.1635 4.21 69.7295 4.714 69.7295 5.302C69.7295 6.03 70.4995 6.31 71.3675 6.618C72.4735 7.038 73.6775 7.486 73.6775 8.928C73.6775 10.174 72.7115 11.196 70.9195 11.196ZM76.6843 5.54C76.1803 5.54 75.7743 5.148 75.7743 4.574C75.7743 3.986 76.1803 3.594 76.6843 3.594C77.2023 3.594 77.6223 3.986 77.6223 4.574C77.6223 5.148 77.2023 5.54 76.6843 5.54ZM76.6843 11.196C76.1803 11.196 75.7743 10.79 75.7743 10.216C75.7743 9.628 76.1803 9.236 76.6843 9.236C77.2023 9.236 77.6223 9.628 77.6223 10.216C77.6223 10.79 77.2023 11.196 76.6843 11.196ZM86.2597 9.376V6.324H83.4177V5.372H86.2597V2.306H87.2957V5.372H90.1377V6.324H87.2957V9.376H86.2597ZM92.4573 11V9.936H94.7393V2.586H92.9053V1.76C93.8293 1.592 94.4873 1.354 95.0333 1.032H96.0133V9.936H98.0853V11H92.4573ZM100.195 7.584V6.604H103.779V7.584H100.195ZM105.58 11V10.258C108.59 7.262 110.27 5.456 110.27 3.818C110.27 2.684 109.668 1.872 108.394 1.872C107.554 1.872 106.826 2.404 106.252 3.076L105.51 2.348C106.35 1.438 107.246 0.85 108.548 0.85C110.382 0.85 111.53 1.998 111.53 3.776C111.53 5.652 109.808 7.514 107.442 10.006C107.974 9.95 108.604 9.908 109.122 9.908H112.02V11H105.58ZM113.906 11V10.258C116.916 7.262 118.596 5.456 118.596 3.818C118.596 2.684 117.994 1.872 116.72 1.872C115.88 1.872 115.152 2.404 114.578 3.076L113.836 2.348C114.676 1.438 115.572 0.85 116.874 0.85C118.708 0.85 119.856 1.998 119.856 3.776C119.856 5.652 118.134 7.514 115.768 10.006C116.3 9.95 116.93 9.908 117.448 9.908H120.346V11H113.906ZM122.232 11V10.258C125.242 7.262 126.922 5.456 126.922 3.818C126.922 2.684 126.32 1.872 125.046 1.872C124.206 1.872 123.478 2.404 122.904 3.076L122.162 2.348C123.002 1.438 123.898 0.85 125.2 0.85C127.034 0.85 128.182 1.998 128.182 3.776C128.182 5.652 126.46 7.514 124.094 10.006C124.626 9.95 125.256 9.908 125.774 9.908H128.672V11H122.232ZM130.585 7.584V6.604H134.169V7.584H130.585ZM139.009 11.196C137.413 11.196 136.433 10.524 135.733 9.824L136.377 8.984C136.951 9.586 137.707 10.132 138.883 10.132C140.101 10.132 141.067 9.25 141.067 7.85C141.067 6.478 140.227 5.652 138.953 5.652C138.267 5.652 137.833 5.876 137.245 6.268L136.559 5.834L136.881 1.032H141.879V2.124H138.001L137.735 5.092C138.197 4.84 138.659 4.686 139.275 4.686C140.983 4.686 142.369 5.652 142.369 7.808C142.369 9.978 140.731 11.196 139.009 11.196ZM147.334 11.196C145.738 11.196 144.758 10.524 144.058 9.824L144.702 8.984C145.276 9.586 146.032 10.132 147.208 10.132C148.426 10.132 149.392 9.25 149.392 7.85C149.392 6.478 148.552 5.652 147.278 5.652C146.592 5.652 146.158 5.876 145.57 6.268L144.884 5.834L145.206 1.032H150.204V2.124H146.326L146.06 5.092C146.522 4.84 146.984 4.686 147.6 4.686C149.308 4.686 150.694 5.652 150.694 7.808C150.694 9.978 149.056 11.196 147.334 11.196ZM155.66 11.196C154.064 11.196 153.084 10.524 152.384 9.824L153.028 8.984C153.602 9.586 154.358 10.132 155.534 10.132C156.752 10.132 157.718 9.25 157.718 7.85C157.718 6.478 156.878 5.652 155.604 5.652C154.918 5.652 154.484 5.876 153.896 6.268L153.21 5.834L153.532 1.032H158.53V2.124H154.652L154.386 5.092C154.848 4.84 155.31 4.686 155.926 4.686C157.634 4.686 159.02 5.652 159.02 7.808C159.02 9.978 157.382 11.196 155.66 11.196ZM160.976 7.584V6.604H164.56V7.584H160.976ZM169.637 11.196C167.635 11.196 166.431 9.334 166.431 5.988C166.431 2.642 167.635 0.85 169.637 0.85C171.611 0.85 172.815 2.642 172.815 5.988C172.815 9.334 171.611 11.196 169.637 11.196ZM169.637 10.16C170.799 10.16 171.583 8.914 171.583 5.988C171.583 3.048 170.799 1.872 169.637 1.872C168.461 1.872 167.663 3.048 167.663 5.988C167.663 8.914 168.461 10.16 169.637 10.16ZM177.963 11.196C175.961 11.196 174.757 9.334 174.757 5.988C174.757 2.642 175.961 0.85 177.963 0.85C179.937 0.85 181.141 2.642 181.141 5.988C181.141 9.334 179.937 11.196 177.963 11.196ZM177.963 10.16C179.125 10.16 179.909 8.914 179.909 5.988C179.909 3.048 179.125 1.872 177.963 1.872C176.787 1.872 175.989 3.048 175.989 5.988C175.989 8.914 176.787 10.16 177.963 10.16ZM186.288 11.196C184.286 11.196 183.082 9.334 183.082 5.988C183.082 2.642 184.286 0.85 186.288 0.85C188.262 0.85 189.466 2.642 189.466 5.988C189.466 9.334 188.262 11.196 186.288 11.196ZM186.288 10.16C187.45 10.16 188.234 8.914 188.234 5.988C188.234 3.048 187.45 1.872 186.288 1.872C185.112 1.872 184.314 3.048 184.314 5.988C184.314 8.914 185.112 10.16 186.288 10.16ZM194.614 11.196C192.612 11.196 191.408 9.334 191.408 5.988C191.408 2.642 192.612 0.85 194.614 0.85C196.588 0.85 197.792 2.642 197.792 5.988C197.792 9.334 196.588 11.196 194.614 11.196ZM194.614 10.16C195.776 10.16 196.56 8.914 196.56 5.988C196.56 3.048 195.776 1.872 194.614 1.872C193.438 1.872 192.64 3.048 192.64 5.988C192.64 8.914 193.438 10.16 194.614 10.16Z"
              fill="#929292"
            />
          </svg>
        </div>
        <div class="chat-function-right">
          <svg
            @click="toggleEmail"
            style="cursor: pointer"
            width="20"
            height="14"
            viewBox="0 0 20 14"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect
              x="0.6"
              y="0.6"
              width="18.8"
              height="12.8"
              rx="2.4"
              stroke="#929292"
              stroke-width="1.2"
            />
            <rect
              x="1"
              y="2.08789"
              width="1.2"
              height="9.89859"
              transform="rotate(-65 1 2.08789)"
              fill="#929292"
            />
            <rect
              width="1.2"
              height="9.89694"
              transform="matrix(-0.422618 -0.906308 -0.906308 0.422618 18.9375 2.08789)"
              fill="#929292"
            />
          </svg>
        </div>
      </div>
      <div class="bottom-box">
        <svg
          style="cursor: pointer"
          v-if="isSwitchICon"
          @click="showEmojiChange"
          width="26"
          height="26"
          viewBox="0 0 26 26"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M12.9105 1.69727C9.8976 1.70028 7.00897 2.89848 4.87853 5.02892C2.74809 7.15936 1.54989 10.048 1.54688 13.0609C1.54989 16.0738 2.74809 18.9624 4.87853 21.0929C7.00897 23.2233 9.8976 24.4215 12.9105 24.4245C15.9234 24.4215 18.812 23.2233 20.9425 21.0929C23.0729 18.9624 24.2711 16.0738 24.2741 13.0609C24.2711 10.048 23.0729 7.15936 20.9425 5.02892C18.812 2.89848 15.9234 1.70028 12.9105 1.69727ZM12.9105 22.7995C10.3286 22.7965 7.85327 21.7695 6.02758 19.9438C4.20188 18.1181 3.17489 15.6428 3.17188 13.0609C3.17489 10.479 4.20188 8.00366 6.02758 6.17797C7.85327 4.35227 10.3286 3.32528 12.9105 3.32227C15.4924 3.32528 17.9677 4.35227 19.7934 6.17797C21.6191 8.00366 22.6461 10.479 22.6491 13.0609C22.6461 15.6428 21.6191 18.1181 19.7934 19.9438C17.9677 21.7695 15.4924 22.7965 12.9105 22.7995Z"
            fill="#929292"
          />
          <path
            d="M8.10938 10.2695C8.10937 10.4296 8.1409 10.5881 8.20215 10.7359C8.26339 10.8838 8.35317 11.0181 8.46634 11.1313C8.57951 11.2445 8.71386 11.3343 8.86173 11.3955C9.0096 11.4568 9.16808 11.4883 9.32812 11.4883C9.48817 11.4883 9.64665 11.4568 9.79452 11.3955C9.94239 11.3343 10.0767 11.2445 10.1899 11.1313C10.3031 11.0181 10.3929 10.8838 10.4541 10.7359C10.5154 10.5881 10.5469 10.4296 10.5469 10.2695C10.5469 10.1095 10.5154 9.951 10.4541 9.80314C10.3929 9.65527 10.3031 9.52092 10.1899 9.40774C10.0767 9.29457 9.94239 9.2048 9.79452 9.14355C9.64665 9.08231 9.48817 9.05078 9.32812 9.05078C9.16808 9.05078 9.0096 9.08231 8.86173 9.14355C8.71386 9.2048 8.57951 9.29457 8.46634 9.40774C8.35317 9.52092 8.26339 9.65527 8.20215 9.80314C8.1409 9.951 8.10937 10.1095 8.10938 10.2695Z"
            fill="#929292"
          />
          <path
            d="M14.9141 10.2695C14.9141 10.5928 15.0425 10.9028 15.271 11.1313C15.4996 11.3599 15.8096 11.4883 16.1328 11.4883C16.456 11.4883 16.766 11.3599 16.9946 11.1313C17.2232 10.9028 17.3516 10.5928 17.3516 10.2695C17.3516 9.9463 17.2232 9.6363 16.9946 9.40774C16.766 9.17918 16.456 9.05078 16.1328 9.05078C15.8096 9.05078 15.4996 9.17918 15.271 9.40774C15.0425 9.6363 14.9141 9.9463 14.9141 10.2695Z"
            fill="#929292"
          />
          <path
            d="M16.9888 15.565C16.8991 15.5074 16.7989 15.468 16.694 15.4492C16.5891 15.4303 16.4815 15.4323 16.3773 15.4551C16.2732 15.4779 16.1745 15.521 16.0871 15.582C15.9996 15.6429 15.925 15.7205 15.8676 15.8103C15.3394 16.6342 14.1418 17.1672 12.8191 17.1672C11.4963 17.1672 10.3003 16.6358 9.77219 15.812C9.71591 15.7195 9.64172 15.6392 9.55398 15.5758C9.46624 15.5124 9.36671 15.4672 9.26125 15.4428C9.15578 15.4184 9.0465 15.4153 8.93983 15.4337C8.83316 15.4522 8.73125 15.4917 8.64007 15.5501C8.5489 15.6084 8.47031 15.6844 8.40892 15.7736C8.34753 15.8627 8.30458 15.9633 8.28258 16.0693C8.26058 16.1753 8.25998 16.2846 8.28083 16.3908C8.30167 16.497 8.34352 16.598 8.40394 16.6878C9.23594 17.9862 10.9276 18.7922 12.8191 18.7922C14.7122 18.7922 16.4038 17.9862 17.2358 16.6862C17.3516 16.5047 17.3906 16.2847 17.3443 16.0745C17.298 15.8643 17.1701 15.681 16.9888 15.565Z"
            fill="#929292"
          />
        </svg>
        <svg
          @click="showEmojiChange"
          v-else
          width="26"
          height="26"
          viewBox="0 0 26 26"
          fill="none"
          style="cursor: pointer"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M13.0005 15.8963L5.04881 7.37661C4.57933 6.87446 3.81952 6.87446 3.35155 7.37661C2.88282 7.87874 2.88282 8.69341 3.35155 9.19554L12.1521 18.624C12.6208 19.1253 13.381 19.1253 13.8483 18.624L22.6485 9.19554C22.8828 8.9437 23 8.61454 23 8.28532C23 7.95609 22.8828 7.62692 22.6477 7.37661C22.179 6.87446 21.4203 6.87446 20.9515 7.37661L13.0005 15.8963Z"
            fill="#929292"
          />
        </svg>

        <input
          class="bottom-inp"
          @keydown.enter="sendMessage"
          v-model="newMessage"
          placeholder="something..."
          type="text"
        />
        <div class="send-container">
          <svg
            @click="sendMessage"
            width="26"
            height="22"
            viewBox="0 0 26 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style="margin-left: 0.5em"
          >
            <path
              opacity="0.7"
              d="M1.397 0.0564583C0.640366 -0.198942 -0.113613 0.449753 0.0142612 1.246L3.19785 21.0985C3.22519 21.2692 3.2929 21.4306 3.39522 21.5691C3.49753 21.7076 3.63141 21.8191 3.78548 21.894C3.93955 21.9689 4.10923 22.0051 4.28009 21.9994C4.45096 21.9938 4.61794 21.9465 4.76683 21.8615L13.2416 17.0272L17.0926 18.6942C17.2482 18.7616 17.4173 18.7903 17.5861 18.7781C17.7548 18.7659 17.9182 18.713 18.0627 18.624C18.2071 18.5349 18.3284 18.4123 18.4164 18.2662C18.5045 18.1201 18.5567 17.9549 18.5688 17.7842L18.5714 17.7059L18.5651 13.9903L25.4602 10.0573C26.2354 9.61465 26.1537 8.47554 25.3562 8.1359L25.2739 8.10478L1.397 0.0564583ZM2.39028 2.65285L22.335 9.37588L16.9812 12.4294C16.8302 12.5157 16.7023 12.6381 16.6089 12.7858C16.5155 12.9336 16.4593 13.1023 16.4453 13.2772L16.4416 13.3662L16.4464 16.0796L13.5944 14.8455C13.4597 14.7872 13.3146 14.7577 13.1681 14.7589C13.0217 14.7601 12.877 14.792 12.7433 14.8525L12.6552 14.8976L5.04964 19.2361L2.39028 2.65285ZM5.55265 5.75306C5.38219 5.95995 5.29488 6.22409 5.30805 6.49305C5.32122 6.76201 5.43391 7.01613 5.62375 7.20498L5.68848 7.264L12.0557 12.6295C12.2662 12.8053 12.5357 12.8923 12.808 12.8723C13.0804 12.8523 13.3346 12.7269 13.5179 12.5223C13.7012 12.3176 13.7994 12.0493 13.7921 11.7733C13.7848 11.4973 13.6726 11.2348 13.4787 11.0403L13.414 10.9813L7.04682 5.6157C6.83063 5.43363 6.5518 5.34583 6.27161 5.37158C5.99143 5.39734 5.73282 5.53456 5.55265 5.75306Z"
              fill="white"
            />
          </svg>
        </div>
      </div>
    </template>
  </CustomerLayout>
</template>

<script setup>
import CustomerLayout from './CustomerLayout.vue'
import { onMounted, ref, nextTick } from 'vue'
import { useMessageStore } from '@/store/useMessageStore'
import { socket } from '@/socket'
// import { gsap } from 'gsap'
import data from 'emoji-mart-vue-fast/data/all.json'
// Import default CSS
import 'emoji-mart-vue-fast/css/emoji-mart.css'
import { Picker, EmojiIndex } from 'emoji-mart-vue-fast/src'

let emojiIndex = ref('')
emojiIndex.value = new EmojiIndex(data)

const store = useMessageStore()
const newMessage = ref('')
const isShowEmojio = ref(false)
const isSwitchICon = ref(true)
const chatContainerRef = ref(null)
const chatLog = ref([])
const sendMessage = () => {
  if (newMessage.value) {
    store.userMessage.push({
      id: store.userMessage.length + 1,
      content: newMessage.value,
      receiver: false
    })
    scrollToBottom()
    socket.emit('private message', newMessage.value)
    newMessage.value = ''
  }
}
const toggleEmail = () => {
  store.isEmailBox = !store.isEmailBox
}
const goBack = () => {
  if (store.isEmailBox == false) {
    store.toCustomer = true
  }
}

const showEmoji = (emoji) => {
  console.log(emoji)
  newMessage.value += emoji.native
}

const showEmojiChange = () => {
  isSwitchICon.value = !isSwitchICon.value
  isShowEmojio.value = !isShowEmojio.value
}

const scrollToBottom = () => {
  nextTick(() => {
    if (chatContainerRef.value) {
      chatContainerRef.value.scrollTop = chatContainerRef.value.scrollHeight
    }
  })
}

onMounted(() => {
  // 页面加载完成后滚动到底部
  scrollToBottom()
})
nextTick(() => {
  chatLog.value = store.userMessage
})
socket.on('private message', (msg) => {
  console.log(msg)
  store.userMessage.push({
    id: store.userMessage.length + 1,
    content: msg,
    receiver: true
  })
  scrollToBottom()
})
socket.on('gpt message', async (stream) => {
  // 如果遇到换行符，将接收消息添加到消息数组中
  chatLog.value.push({
    id: chatLog.value.length + 1,
    content: stream,
    receiver: true
  })

  scrollToBottom()
})
</script>

<style scoped>
.chat-container {
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  /* 添加滚动条 */
  flex: 1;
  background-color: #f1fbff;
  width: 100%;
}

/* 自定义滚动条 */
.chat-container::-webkit-scrollbar {
  width: 0.5em;

  /* 设置滚动条宽度 */
}

/* 滚动条滑块 */
.chat-container::-webkit-scrollbar-thumb {
  background-color: #d9d9d9 !important;
  /* 设置滚动条滑块的颜色 */
  border-radius: 4px;
  /* 设置滚动条滑块的圆角 */
}

/* 滚动条滑块悬停时的样式 */
.chat-container::-webkit-scrollbar-thumb:hover {
  background-color: #80a5cc !important;
  /* 设置滚动条滑块在悬停时的颜色 */
}

.message {
  display: flex;
  align-items: flex-start;
  margin: 0.625em;
}

.avatar {
  width: 4.125em;
  height: 4.125em;
  margin-right: 0.5em;
  margin-left: 0.5em;
}

.message-text {
  padding: 1.5em;
  background-color: #e1e1e1;
  font-size: 0.9375em;
  /*white-space: pre-wrap;*/
  word-wrap: break-word;
}
.message-content {
  max-width: 80%;
}
.message-text-right {
  border-radius: 1.5em 0em 1.5em 1.5em;
  background-color: #ffffff;
  color: #474747;
}

.message-text-left {
  border-radius: 0 1.5em 1.5em 1.5em;
  background-color: #33bcea;
  color: #ffffff;
}

.receiver-message {
  justify-content: flex-start;
}

.sender-message {
  display: flex;
  justify-content: flex-start;
  flex-direction: row-reverse;
}

.bottom-box {
  display: flex;
  height: 8em;
  padding: 0 2em;
  align-items: center;
  justify-content: center;
}

.bottom-inp {
  border-radius: 50px;
  flex: 1;
  height: 3em;
  margin: 0 1em;
  border: none;
  background-color: #dcf2f8;
  padding-left: 1.5em;
  font-size: small !important;
}

.bottom-inp::-ms-input-placeholder {
  /* 输入内容... */
  width: 5.75em;
  height: 1.6875em;

  /* web/web正文文本 */
  font-family: 'Noto Sans TC';
  font-style: normal;
  font-weight: 400;
  font-size: 1.125em;
  line-height: 1.6875em;
  /* identical to box height, or 150% */
  letter-spacing: 0.04em;

  /* 灰度/3 */
  color: #929292;
}

.send-container {
  border-radius: 3.125em;
  /* 圆角 */
  background-color: var(--app-color-button-bg);
  /* 背景颜色 */
  width: 8em;
  height: 4em;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}
.send-container:hover {
  background-color: var(--app-color-button-bg-hover);
}
input:focus {
  border-color: #f1fbff;
  border-top-color: #b2dff1;
  /* 设置边框颜色为蓝色 */
  border-width: 0.0625em;
  /* 设置边框宽度 */
  /* border-style: solid; */
  /* 设置边框样式为实线 */
  outline: none;
  /* 去除默认的外部轮廓样式 */
  border-radius: none;
}

.chat-function {
  width: 100%;
  display: flex;
  padding: 0.625em 2em;
  align-items: center;
  justify-content: space-between;
  background-color: #f1fbff;
}

.function-color {
  background-color: #ffffff !important;
}

.chat-function-right {
  display: flex;
  align-items: center;
  /*flex: 2;*/
  justify-content: space-between;
}

.emijon-box {
  position: absolute;
  width: 100%;
  height: 50%;
  bottom: 16%;
}

.emoji-mart {
  width: 100% !important;
  height: 100% !important;
  border-radius: 0.9375em 0.9375em 0 0;
}

@media screen and (max-width: 48em) {
  .functon-phone {
    background-color: #ffffff;
    z-index: 9999;
    box-shadow: 0 -0.3125em 0.3125em rgba(0, 0, 0, 0.1);
    /* 顶部阴影样式 */
  }

  .bottom-box {
    height: 8em;
    border-top: none;
  }
}
</style>
